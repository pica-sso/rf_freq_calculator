<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Freq ↔ Band/Chan Calculator</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: auto;
            background-color: #f8f8f8;
        }

        section {
            margin-bottom: 40px;
            max-width: 480px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        h2 {
            font: sans-serif;
            font-size: 1em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .form-row {
            display: grid;
            grid-template-columns: 120px 1fr auto;
            align-items: center;
            gap: 10px 15px;
            margin-bottom: 15px;
        }

        .button-row {
            display: flex;
            justify-content: flex-start;
            gap: 10px;
        }

        input,
        select {
            padding: 6px 8px;
            font-size: 1em;
            width: 100%;
            max-width: 200px;
            box-sizing: border-box;
            margin-top: 10px;
            margin-bottom: 10px;
            padding: 6px 12px;
        }


        button {
            padding: 7px 14px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 10px;
            margin-bottom: 10px;
            padding: 6px 12px;
        }

        .result {
            margin-top: 15px;
            font-weight: bold;
            min-height: 1.2em;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

    <section>
        <h2>1. Frequency → Band/Channel</h2>
        <div class="form-row">
            <label for="testTypeSelect">Test Type:</label>
            <select id="testTypeSelect">
                <option value="bt">Bluetooth</option>
                <option value="wifi" disabled>WiFi</option>
            </select>
        </div>

        <div class="form-row">
            <label for="standardSelect">Standard:</label>
            <select id="standardSelect">
                <option value="DH5">DH5 (BT)...</option>
                <option value="BLE">BLE</option>
            </select>
        </div>

        <div class="form-row">
            <label for="freqInput">Frequency (MHz):</label>
            <input type="number" id="freqInput" placeholder="Frequency (MHz)" />
            <button onclick="calculateFromFreq()">Calculate</button>
        </div>

        <div id="freqResult" class="result"></div>
    </section>

    <section>
        <h2>2. Band/Channel → Frequency</h2>
        <div class="form-row">
            <label for="testTypeSelect2">Test Type:</label>
            <select id="testTypeSelect2">
                <option value="bt">Bluetooth</option>
                <option value="wifi" disabled>WiFi</option>
            </select>
        </div>

        <div class="form-row">
            <label for="standardSelect2">Standard:</label>
            <select id="standardSelect2">
                <option value="DH5">DH5 (BT)...</option>
                <option value="BLE">BLE</option>
            </select>
        </div>

        <div class="form-row">
            <label for="bandInput">Band:</label>
            <input type="text" id="bandInput" placeholder="Ex: 0,1,2,4,5,6,7" />
        </div>

        <div class="form-row">
            <label for="channelInput">Channel:</label>
            <input type="number" id="channelInput" placeholder="Channel Number" />
            <button onclick="calculateFromChannel()">Calculate</button>
        </div>

        <div id="channelResult" class="result"></div>
    </section>

    <script>
        function calculateFreq(testType, band, channel, standard = null) {
            let freq = -1;
            let bw = (standard !== 'BLE') ? 1 : 2;

            if (testType === 'bt') {
                channel = parseInt(channel);
                band = parseInt(band);

                if (band === 0) {
                    if (channel >= 0 && channel <= 78) freq = 2402 + (bw * channel);
                } else if (band === 1 && channel <= 100) freq = 5150 + (bw * channel);
                else if (band === 2 && channel <= 125) freq = 5725 + (bw * channel);
                else if (band === 4 && channel <= 125) freq = 5925 + (bw * channel);
                else if (band === 5 && channel <= 124) freq = 6051 + (bw * channel);
                else if (band === 6 && channel <= 124) freq = 6176 + (bw * channel);
                else if (band === 7 && channel <= 124) freq = 6301 + (bw * channel);
                else throw new Error("Invalid band or channel");

            } else if (testType === 'wifi') {
                channel = parseInt(channel);
                if (band === '2.4') {
                    freq = 2407 + (channel * 5);
                } else if (band === '5') {
                    freq = 5000 + (channel * 5);
                } else if (band === '6') {
                    freq = 5950 + (channel * 5);
                } else {
                    throw new Error("Invalid WiFi band");
                }
            } else {
                throw new Error("Invalid test type");
            }

            return freq;
        }

        function calculateBandCh(testType, freq, standard = null) {
            let band = -1;
            let ch = -1;
            let bw = (standard !== 'BLE') ? 1 : 2;

            if (testType === 'bt') {
                if (freq >= 2402 && freq <= 2480) {
                    band = 0;
                    ch = Math.floor((freq - 2402) / bw);
                } else if (freq >= 5150 && freq <= 5250) {
                    band = 1;
                    ch = Math.floor((freq - 5150) / bw);
                } else if (freq >= 5725 && freq <= 5850) {
                    band = 2;
                    ch = Math.floor((freq - 5725) / bw);
                } else if (freq >= 5925 && freq <= 6050) {
                    band = 4;
                    ch = Math.floor((freq - 5925) / bw);
                } else if (freq >= 6051 && freq <= 6175) {
                    band = 5;
                    ch = Math.floor((freq - 6051) / bw);
                } else if (freq >= 6176 && freq <= 6300) {
                    band = 6;
                    ch = Math.floor((freq - 6176) / bw);
                } else if (freq >= 6301 && freq <= 6425) {
                    band = 7;
                    ch = Math.floor((freq - 6301) / bw);
                }
            } else if (testType === 'wifi') {
                freq = parseInt(freq);
                if (freq >= 2412 && freq <= 2484) {
                    band = '2.4';
                    ch = Math.round((freq - 2407) / 5);
                } else if (freq >= 5000 && freq <= 5900) {
                    band = '5';
                    ch = Math.round((freq - 5000) / 5);
                } else if (freq >= 5950 && freq <= 7050) {
                    band = '6';
                    ch = Math.round((freq - 5950) / 5);
                }
            }

            return { band, ch };
        }

        function calculateFromFreq() {
            const testType = document.getElementById('testTypeSelect').value;
            const standard = document.getElementById('standardSelect').value;
            const freqStr = document.getElementById('freqInput').value;

            if (!freqStr) {
                document.getElementById('freqResult').innerText = '❌ Please enter a frequency.';
                return;
            }

            const freq = parseInt(freqStr);
            if (isNaN(freq)) {
                document.getElementById('freqResult').innerText = '❌ Please enter a valid number.';
                return;
            }

            try {
                const { band, ch } = calculateBandCh(testType, freq, standard);
                if (band === -1 || ch === -1) {
                    document.getElementById('freqResult').innerText = `❌ Please enter a valid frequency.`;
                } else {
                    document.getElementById('freqResult').innerText = `📶 Band: ${band}, Channel: ${ch}`;
                }
            } catch (e) {
                document.getElementById('freqResult').innerText = `❌ Error: ${e.message}`;
            }
        }

        function calculateFromChannel() {
            const testType = document.getElementById('testTypeSelect2').value;
            const standard = document.getElementById('standardSelect2').value;
            const band = document.getElementById('bandInput').value.trim();
            const chStr = document.getElementById('channelInput').value;

            if (!band) {
                document.getElementById('channelResult').innerText = '❌ Please enter a band.';
                return;
            }
            if (!chStr) {
                document.getElementById('channelResult').innerText = '❌ Please enter a channel.';
                return;
            }

            const ch = parseInt(chStr);
            if (isNaN(ch)) {
                document.getElementById('channelResult').innerText = '❌ Please enter a valid channel number.';
                return;
            }

            try {
                const freq = calculateFreq(testType, band, ch, standard);
                document.getElementById('channelResult').innerText = `📡 Frequency: ${freq} MHz`;
            } catch (e) {
                document.getElementById('channelResult').innerText = `❌ Error: ${e.message}`;
            }
        }

        document.getElementById("freqInput").addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                calculateFromFreq();
            }
        });

        document.getElementById("bandInput").addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                calculateFromChannel();
            }
        });

        document.getElementById("channelInput").addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                calculateFromChannel();
            }
        });

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>